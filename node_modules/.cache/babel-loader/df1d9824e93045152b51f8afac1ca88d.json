{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = formatDate;\nexports.getDelta = getDelta;\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction formatDate(toDate, targetFormatMask, sourceFormatMask) {\n  // to prevent from returning negative duration\n  var countdownMillisecond = Math.max(0, getDelta(toDate, sourceFormatMask));\n\n  var duration = _moment[\"default\"].duration(countdownMillisecond);\n\n  var finalTargetFormatMask = editTargetFormatMask(duration, targetFormatMask);\n  var countdownString = (0, _moment[\"default\"])(duration._data).format(finalTargetFormatMask);\n  return [countdownMillisecond, countdownString];\n}\n\nfunction getDelta(toDate, sourceFormatMask) {\n  if (!_moment[\"default\"].isMoment(toDate)) {\n    var convert = _moment[\"default\"].isDate(toDate) ? (0, _moment[\"default\"])(toDate) : (0, _moment[\"default\"])(toDate, sourceFormatMask);\n    return convert.diff((0, _moment[\"default\"])());\n  }\n\n  return toDate.diff((0, _moment[\"default\"])());\n}\n\nfunction editTargetFormatMask(duration, targetFormatMask) {\n  var changeDate = [];\n  if (duration.months() === 0) changeDate.push('M');\n  if (duration.days() === 0) changeDate.push('D');\n  return changeDate.reduce(function (acc, _char) {\n    var charCount = acc.split('').filter(function (tfm) {\n      return tfm === _char;\n    }).length;\n    var charBefore = generateString(_char, charCount);\n    var charAfter = \"[\".concat(generateString('0', charCount), \"]\");\n    return acc.replace(charBefore, charAfter);\n  }, targetFormatMask);\n}\n\nfunction generateString(character, count) {\n  return Array(count).fill(character).join('');\n}","map":null,"metadata":{},"sourceType":"script"}